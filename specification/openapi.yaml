openapi: 3.1.0
info:
  title: Aurelian One Workspace API
  version: 0.0.1
paths:
  /workspaces:
    get:
      operationId: listWorkspace
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Workspace"
        "400":
          $ref: "#/components/responses/StandardBadRequestProblem"
        "404":
          $ref: "#/components/responses/StandardNotFoundProblem"
        default:
          $ref: "#/components/responses/StandardProblemResponse"

  /workspaces/{id}:
    get:
      operationId: getWorkspace
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
        "400":
          $ref: "#/components/responses/StandardBadRequestProblem"
        "404":
          $ref: "#/components/responses/StandardNotFoundProblem"
        default:
          $ref: "#/components/responses/StandardProblemResponse"

  /workspaces/{id}/document:
    get:
      operationId: downloadWorkspaceDocument
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          $ref: "#/components/responses/StandardBadRequestProblem"
        "404":
          $ref: "#/components/responses/StandardNotFoundProblem"
        default:
          $ref: "#/components/responses/StandardProblemResponse"

  /workspaces/{id}/actions/sync:
    get:
      operationId: synchroniseWorkspaceDocument
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "101":
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          $ref: "#/components/responses/StandardBadRequestProblem"
        "404":
          $ref: "#/components/responses/StandardNotFoundProblem"
        default:
          $ref: "#/components/responses/StandardProblemResponse"

components:
  responses:
    StandardBadRequestProblem:
      description: The parameters or contents of the request were not valid.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Problem"
    StandardNotFoundProblem:
      description: The requested or associated resource was not found.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Problem"
    StandardProblemResponse:
      description: A problem occurred while processing the request.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Problem"
  schemas:
    Problem:
      type: object
      description: An https://datatracker.ietf.org/doc/html/rfc9457 Problem response.
      properties:
        type:
          description: A URI reference that identifies the problem type or class.
          type: string
          format: uri
          example: "http://example.com/problems/500"
        status:
          description: The HTTP status code generated by the origin server for this occurrence of the Problem.
          type: integer
          example: 400
        title:
          description: A short human-readable summary of the problem type.
          type: string
          example: A generic error
        detail:
          description: A longer human-readable explanation specific to this occurrence of the Problem.
          type: string
          example: The value was bad
        instance:
          description: A URI reference that identifies the specific occurrence of the Problem.
          type: string
          format: uri
          example: "http://example.com/analytics/123451235124"
      required:
        - type
        - status
        - title
        - detail
    Workspace:
      type: object
      properties:
        id:
          type: string
        alias:
          type: string
        created_at:
          type: string
          format: date-time
        size_in_bytes:
          type: integer
      required:
        - id
        - alias
        - created_at
        - size_in_bytes
